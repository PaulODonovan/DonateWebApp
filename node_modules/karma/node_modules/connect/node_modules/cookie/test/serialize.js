// builtin
var assert = require('assert');

var cookie = require('..');

suite('serialize');

test('basic', function() {
    assert.equal('foo=bar', cookie.serialize('foo', 'bar'));
    assert.equal('foo=bar%20baz', cookie.serialize('foo', 'bar baz'));
});

test('path', function() {
    assert.equal('foo=bar; Path=/', cookie.serialize('foo', 'bar', {
<<<<<<< HEAD
	path: '/'
=======
        path: '/'
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
});

test('secure', function() {
    assert.equal('foo=bar; Secure', cookie.serialize('foo', 'bar', {
<<<<<<< HEAD
	secure: true
    }));

    assert.equal('foo=bar', cookie.serialize('foo', 'bar', {
	secure: false
=======
        secure: true
    }));

    assert.equal('foo=bar', cookie.serialize('foo', 'bar', {
        secure: false
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
});

test('domain', function() {
    assert.equal('foo=bar; Domain=example.com', cookie.serialize('foo', 'bar', {
<<<<<<< HEAD
	domain: 'example.com'
=======
        domain: 'example.com'
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
});

test('httpOnly', function() {
    assert.equal('foo=bar; HttpOnly', cookie.serialize('foo', 'bar', {
<<<<<<< HEAD
	httpOnly: true
=======
        httpOnly: true
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
});

test('maxAge', function() {
    assert.equal('foo=bar; Max-Age=1000', cookie.serialize('foo', 'bar', {
<<<<<<< HEAD
	maxAge: 1000
=======
        maxAge: 1000
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
});

test('escaping', function() {
    assert.deepEqual('cat=%2B%20', cookie.serialize('cat', '+ '));
});

test('parse->serialize', function() {

    assert.deepEqual({ cat: 'foo=123&name=baz five' }, cookie.parse(
      cookie.serialize('cat', 'foo=123&name=baz five')));

    assert.deepEqual({ cat: ' ";/' }, cookie.parse(
      cookie.serialize('cat', ' ";/')));
});

test('unencoded', function() {
    assert.deepEqual('cat=+ ', cookie.serialize('cat', '+ ', {
<<<<<<< HEAD
	encode: function(value) { return value; }
=======
        encode: function(value) { return value; }
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    }));
})
