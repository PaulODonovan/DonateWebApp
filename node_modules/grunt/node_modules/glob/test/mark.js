var test = require("tap").test
var glob = require('../')
process.chdir(__dirname)

test("mark, no / on pattern", function (t) {
  glob("a/*", {mark: true}, function (er, results) {
    if (er)
      throw er
    var expect = [ 'a/abcdef/',
<<<<<<< HEAD
		   'a/abcfed/',
		   'a/b/',
		   'a/bc/',
		   'a/c/',
		   'a/cb/' ]
=======
                   'a/abcfed/',
                   'a/b/',
                   'a/bc/',
                   'a/c/',
                   'a/cb/' ]
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e

    if (process.platform !== "win32")
      expect.push('a/symlink/')

    t.same(results, expect)
    t.end()
  })
})

test("mark=false, no / on pattern", function (t) {
  glob("a/*", function (er, results) {
    if (er)
      throw er
    var expect = [ 'a/abcdef',
<<<<<<< HEAD
		   'a/abcfed',
		   'a/b',
		   'a/bc',
		   'a/c',
		   'a/cb' ]
=======
                   'a/abcfed',
                   'a/b',
                   'a/bc',
                   'a/c',
                   'a/cb' ]
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e

    if (process.platform !== "win32")
      expect.push('a/symlink')
    t.same(results, expect)
    t.end()
  })
})

test("mark=true, / on pattern", function (t) {
  glob("a/*/", {mark: true}, function (er, results) {
    if (er)
      throw er
    var expect = [ 'a/abcdef/',
<<<<<<< HEAD
		    'a/abcfed/',
		    'a/b/',
		    'a/bc/',
		    'a/c/',
		    'a/cb/' ]
=======
                    'a/abcfed/',
                    'a/b/',
                    'a/bc/',
                    'a/c/',
                    'a/cb/' ]
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    if (process.platform !== "win32")
      expect.push('a/symlink/')
    t.same(results, expect)
    t.end()
  })
})

test("mark=false, / on pattern", function (t) {
  glob("a/*/", function (er, results) {
    if (er)
      throw er
    var expect = [ 'a/abcdef/',
<<<<<<< HEAD
		   'a/abcfed/',
		   'a/b/',
		   'a/bc/',
		   'a/c/',
		   'a/cb/' ]
=======
                   'a/abcfed/',
                   'a/b/',
                   'a/bc/',
                   'a/c/',
                   'a/cb/' ]
>>>>>>> 40dc066702148240d46d84f6c15203d8e58bc81e
    if (process.platform !== "win32")
      expect.push('a/symlink/')
    t.same(results, expect)
    t.end()
  })
})
